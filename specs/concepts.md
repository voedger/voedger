# Voedger Domain Concepts

This document defines core Voedger domain concepts and terminology used throughout the codebase

## Application Structure

### Application

Top-level container that defines a complete Voedger application

Declared using APPLICATION statement in VSQL schema files

### Package

Reusable unit of schema definitions that can be imported by applications

Packages contain schema files with type definitions, workspaces, and other declarations

### Workspace

Isolated data container within an application that defines its own set of tables, commands, queries, and views

Workspaces can be ABSTRACT (base definitions), ALTERABLE (can be extended), or concrete implementations

### Schema

Collection of type definitions written in VSQL (Voedger SQL) that defines the structure of an application

See [design/schemas/syntax.md](../../design/schemas/syntax.md) for detailed VSQL syntax

## Document Types

Documents are persistent data structures that inherit from IDoc interface

### GDoc (Global Document)

Global configuration documents with WSID==0

Used for system-wide settings like UserProfileLocation, SystemConfig

Examples: system configuration, global user profiles

### CDoc (Configuration Document)

Per-workspace configuration documents

Used for reference data that changes infrequently: articles, prices, clients, currencies

Inherits from ISingleton - can have singleton instances

### ODoc (Operational Document)

Immutable operational documents representing completed transactions

Used for transactional records: invoices, receipts, orders

Cannot be edited after creation

### WDoc (Workflow Document)

Mutable workflow documents that extend ODoc concept

Used for documents that go through workflow states: bills, work orders

Can be edited during workflow progression

## Record Types

Records are contained data structures that belong to documents

### CRecord

Child records contained within CDoc documents

Used for nested configuration data within configuration documents

### WRecord

Child records contained within WDoc documents

Used for nested data within workflow documents

### GRecord

Child records contained within GDoc documents

Used for nested data within global documents

### ORecord

Child records contained within ODoc documents

Used for nested data within operational documents

## Singleton Types

Singletons are special document types with single instance per workspace

### CSingleton

Configuration singleton - single instance configuration document per workspace

Inherits from CDoc

### WSingleton

Workflow singleton - single instance workflow document per workspace

Inherits from WDoc

## CQRS Components

Voedger follows CQRS (Command Query Responsibility Segregation) pattern

### Command

Write operation that modifies application state

Commands validate input and generate events that are stored in PLog

Declared using COMMAND statement in VSQL

### Query

Read operation that retrieves data from projections

Queries read from Views, Records, or WLog

Declared using QUERY statement in VSQL

### Projector

Function that processes events and updates projections (Read Model)

Generates Intents based on Event data and current State

Declared using PROJECTOR statement or implemented in extension code

### View

Materialized projection of event data optimized for queries

Updated asynchronously by Projectors

Declared using VIEW statement in VSQL

## Event Logs

### PLog (Partition Log)

Write Model - strongly consistent event log partitioned by PartitionID

Stores all events generated by Commands

Represents the source of truth for all application data

### WLog (Workspace Log)

Per-workspace event log indexed by WSID (Workspace ID)

Subset of PLog events filtered by workspace

Used for workspace-specific event processing

## Projector Architecture

### State

Read-only interface for Projectors to access current data from storages

Provides access to Views, Records, WLog, and other storage types

### Intents

Declarations of Create or Update operations that Projectors want to apply

Intents are collected during Projector execution and applied atomically after completion

### Actualizer

Component that feeds Projectors with events from PLog and applies Intents to storages

Can be Async (eventual consistency) or Sync (strong consistency)

See [design/projectors/README.md](../../design/projectors/README.md) for detailed architecture

## References

- [design/schemas/syntax.md](../../design/schemas/syntax.md) - VSQL syntax details
- [design/consistency/README.md](../../design/consistency/README.md) - Consistency model
- [design/projectors/README.md](../../design/projectors/README.md) - Projector architecture
- [pkg/appdef/README.md](../../pkg/appdef/README.md) - Type system implementation
